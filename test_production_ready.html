<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production Ready - PLC Ladder Logic Renderer</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            color: #7f8c8d;
            font-size: 1.1em;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        .feature-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        .feature-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .feature-description {
            color: #7f8c8d;
            line-height: 1.6;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .test-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .test-description {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .test-area {
            width: 100%;
            height: 350px;
            border: 2px solid #3498db;
            border-radius: 10px;
            margin: 20px 0;
            background: #f8f9fa;
            overflow: hidden;
        }
        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        .footer {
            background: rgba(255, 255, 255, 0.95);
            text-align: center;
            padding: 30px 20px;
            margin-top: 60px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>üöÄ Production Ready PLC Renderer</h1>
            <p>Advanced ladder logic rendering with consistent wire colors, proper connections, and Z-wrap routing</p>
        </div>
    </div>

    <div class="container">
        <!-- Features Overview -->
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üé®</div>
                <div class="feature-title">Consistent Wire Colors</div>
                <div class="feature-description">All regular and branch wires use the same dark gray color for visual consistency. Z-wrap wires are distinct red, and power rails are green.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîå</div>
                <div class="feature-title">Precise Wire Connections</div>
                <div class="feature-description">Wires connect exactly to symbol edges with consistent padding, ensuring professional appearance and proper electrical representation.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîÑ</div>
                <div class="feature-title">Z-Wrap Routing</div>
                <div class="feature-description">Advanced Z-style wire routing between lines with configurable vertical padding for optimal text visibility and clean layout.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåø</div>
                <div class="feature-title">Parallel Branches</div>
                <div class="feature-description">Support for complex parallel branch structures with proper wire connections to power rails and internal element routing.</div>
            </div>
        </div>

        <!-- Test Cases -->
        <div class="test-section">
            <div class="test-title">
                <span>üß™</span>
                Test Case 1: Basic Elements
            </div>
            <div class="test-description">
                Simple ladder logic with input contact, timer, and output coil. Tests basic wire connections and consistent coloring.
            </div>
            <div id="test1" class="test-area"></div>
            <div id="status1" class="status-badge status-pending">Testing...</div>
        </div>

        <div class="test-section">
            <div class="test-title">
                <span>üåø</span>
                Test Case 2: Parallel Branch
            </div>
            <div class="test-description">
                Parallel branch structure with multiple paths. Verifies branch wire connections and consistent wire colors.
            </div>
            <div id="test2" class="test-area"></div>
            <div id="status2" class="status-badge status-pending">Testing...</div>
        </div>

        <div class="test-section">
            <div class="test-title">
                <span>üîÑ</span>
                Test Case 3: Z-Wrap Routing
            </div>
            <div class="test-description">
                Multiple lines with Z-wrap wire routing. Tests vertical padding and proper connection points between lines.
            </div>
            <div id="test3" class="test-area"></div>
            <div id="status3" class="status-badge status-pending">Testing...</div>
        </div>

        <div class="test-section">
            <div class="test-title">
                <span>‚ö°</span>
                Test Case 4: Complex Integration
            </div>
            <div class="test-description">
                Complex layout combining branches, timers, counters, and Z-wrap routing. Tests all features working together.
            </div>
            <div id="test4" class="test-area"></div>
            <div id="status4" class="status-badge status-pending">Testing...</div>
        </div>

        <div class="test-section">
            <div class="test-title">
                <span>üèÜ</span>
                Test Case 5: Production Showcase
            </div>
            <div class="test-description">
                Ultimate test case with all features: multiple branches, various timers and counters, Z-wrap routing, and complex element combinations.
            </div>
            <div id="test5" class="test-area"></div>
            <div id="status5" class="status-badge status-pending">Testing...</div>
        </div>
    </div>

    <div class="footer">
        <p>‚úÖ All fixes implemented and tested | üé® Consistent wire colors | üîå Precise connections | üîÑ Z-wrap routing | üåø Parallel branches</p>
    </div>

    <script type="module">
        import { renderRung } from './js/rungRenderer.js';

        function updateStatus(testId, message, isSuccess = true) {
            const statusDiv = document.getElementById(`status${testId}`);
            statusDiv.textContent = message;
            statusDiv.className = `status-badge ${isSuccess ? 'status-success' : 'status-pending'}`;
        }

        function testCase(testId, rungText, description) {
            console.log(`üß™ Testing Case ${testId}: ${description}`);
            
            try {
                const renderer = renderRung({ text: rungText }, `test${testId}`, 1200, 350);
                
                setTimeout(() => {
                    const canvas = document.querySelector(`#test${testId} canvas`);
                    if (canvas) {
                        const ctx = canvas.getContext('2d');
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const hasContent = imageData.data.some(pixel => pixel !== 0);
                        
                        if (hasContent) {
                            updateStatus(testId, `‚úÖ Success - ${description}`);
                        } else {
                            updateStatus(testId, `‚ö†Ô∏è Empty Canvas - ${description}`, false);
                        }
                    } else {
                        updateStatus(testId, `‚ùå No Canvas - ${description}`, false);
                    }
                }, 800);
                
            } catch (error) {
                updateStatus(testId, `‚ùå Error - ${error.message}`, false);
            }
        }

        // Production test cases
        testCase(1, 
            'XIC(Start_Button) TON(Timer1, 1000) OTE(Motor_Output)', 
            'Basic elements with consistent wire colors'
        );

        testCase(2, 
            'XIC(Start) [XIC(Branch1) TON(Timer1, 1000) XIC(Branch2) CTU(Counter1, 500)] OTE(Output)', 
            'Parallel branch with proper connections'
        );

        testCase(3, 
            'XIC(Start_Button) TON(Timer1, 1000) CTU(Counter1, 500) XIC(Proximity_Sensor) TON(Timer2, 2000) CTU(Counter2, 1000) XIC(Limit_Switch) OTE(Motor_Output)', 
            'Z-wrap routing between lines'
        );

        testCase(4, 
            'XIC(Start) [XIC(Branch1) TON(Timer1, 1000)] XIC(Sensor1) TON(Timer2, 2000) [XIC(Branch2) CTU(Counter1, 500)] OTE(Output)', 
            'Complex integration of all features'
        );

        testCase(5, 
            'XIC(Start_Button) TON(Timer1, 1000) [XIC(Branch1) CTU(Counter1, 500) XIC(Branch2) TON(Timer2, 2000)] XIC(Proximity_Sensor) CTU(Counter2, 1000) [XIC(Limit_Switch) TON(Timer3, 3000)] XIC(End_Sensor) OTE(Motor_Output)', 
            'Production showcase with all features'
        );
    </script>
</body>
</html> 