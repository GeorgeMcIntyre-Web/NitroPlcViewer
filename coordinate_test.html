<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coordinate Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        canvas { border: 2px solid green; margin: 10px 0; background: white; }
    </style>
</head>
<body>
    <h1>Coordinate Test - Parallel Paths</h1>
    <canvas id="canvas" width="800" height="400"></canvas>

    <script>
        function drawCoordinateTest() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw power rails
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.lineTo(20, canvas.height - 20);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(canvas.width - 20, 20);
            ctx.lineTo(canvas.width - 20, canvas.height - 20);
            ctx.stroke();
            
            // Draw main horizontal line
            ctx.strokeStyle = '#6b7280';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(20, 100);
            ctx.lineTo(canvas.width - 20, 100);
            ctx.stroke();
            
            // Test coordinate calculations
            const mainLineY = 100;
            const startY = mainLineY + 80; // 180
            const pathSpacing = 60;
            
            console.log('Main line Y:', mainLineY);
            console.log('Start Y:', startY);
            console.log('Path spacing:', pathSpacing);
            
            // Draw parallel paths with different Y coordinates
            for (let pathIndex = 0; pathIndex < 2; pathIndex++) {
                const pathY = startY + pathIndex * pathSpacing;
                console.log(`Path ${pathIndex} Y:`, pathY);
                
                // Draw horizontal line for this path
                ctx.strokeStyle = '#6b7280';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(200, pathY);
                ctx.lineTo(600, pathY);
                ctx.stroke();
                
                // Draw a test element on this path
                const elementX = 300 + pathIndex * 100;
                drawContact(ctx, elementX, pathY, pathIndex === 0 ? 'XIC' : 'XIO', 
                           pathIndex === 0 ? 'Proximity_Sensor' : 'Emergency_Stop');
                
                // Draw coordinate label
                ctx.font = '12px Arial';
                ctx.fillStyle = '#000000';
                ctx.textAlign = 'left';
                ctx.fillText(`Path ${pathIndex} Y=${pathY}`, 50, pathY - 10);
            }
            
            // Draw split and merge lines
            ctx.strokeStyle = '#6b7280';
            ctx.lineWidth = 3;
            
            // Split line
            ctx.beginPath();
            ctx.moveTo(200, 100);
            ctx.lineTo(200, startY + 60);
            ctx.stroke();
            
            // Merge line
            ctx.beginPath();
            ctx.moveTo(600, startY + 60);
            ctx.lineTo(600, 100);
            ctx.stroke();
        }

        function drawContact(ctx, x, y, instruction, tag) {
            const width = 35;
            const height = 25;
            
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#ffffff';
            
            const rectX = Math.round(x - width/2);
            const rectY = Math.round(y - height/2);
            
            ctx.strokeRect(rectX, rectY, width, height);
            ctx.fillRect(rectX, rectY, width, height);
            ctx.strokeRect(rectX, rectY, width, height);

            const symbol = instruction === 'XIC' ? '| |' : '|/|';
            ctx.font = 'bold 12px "Courier New", monospace';
            ctx.fillStyle = '#1f2937';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(symbol, x, y);

            if (tag) {
                ctx.font = '10px "Courier New", monospace';
                ctx.fillStyle = '#6b7280';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'top';
                const tagY = Math.round(y + height/2 + 15);
                ctx.fillText(tag, x, tagY);
            }
        }

        // Run on load
        window.onload = function() {
            drawCoordinateTest();
        };
    </script>
</body>
</html> 